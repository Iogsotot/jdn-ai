# Setup plugin
Current version of JDN plugin is client-server application with to independent parts and both parts should be installed separately.

### **Setup plugin to Chrome**
* Download the last version of the plugin: https://github.com/jdi-testing/jdn-ai/releases (you need an archive named like the JDN version) as archive
* Unpack the content to any convenient place (the result folder name is 'dist')
* Open Chrome Settings -> choose option 'More tools' -> choose option Extensions -> Click 'Load unpacked'
* Select unpacked folder with the plugin on subfolders level (in the way that the contend as 'CSS' and 'Images', don’t do it just for 'dist' folder)
* Open Chrome developer tools by F12 -> JDN tab should be added as the last tab at the Devtools

### **Setup server part**
* Setup Docker https://www.docker.com/products/docker-desktop
* Download the latest Docker Compose file from the `develop` branch and run `docker compose`:
#### Stable version
**macOS/Linux**
```shell
curl --output docker-compose.yaml --url https://raw.githubusercontent.com/jdi-testing/jdi-qasp-ml/master/docker-compose-stable.yaml && docker compose up
```
**Windows**
```shell
curl.exe --output docker-compose.yaml --url https://raw.githubusercontent.com/jdi-testing/jdi-qasp-ml/master/docker-compose-stable.yaml && docker compose up
```

#### Development version
**macOS/Linux**
```shell
curl --output docker-compose.yaml --url https://raw.githubusercontent.com/jdi-testing/jdi-qasp-ml/develop/docker-compose.yaml && docker compose up
```
**Windows**
```shell
curl.exe --output docker-compose.yaml --url https://raw.githubusercontent.com/jdi-testing/jdi-qasp-ml/develop/docker-compose.yaml && docker compose up
```
* In Windows 10 use PowerShell instead of regular command-line interpreter, for macOS use native terminal.
* <span style="color:orange">Attention! The first time you will build the docker image can take significant time<span>
* After finishing of downloading check that container is created and the number of version is displayed in JDN plugin tab.



# **How to work with the plugin**

The plugin allows generating Page Objects:
- for the JDI framework;
- locators type - xPath;
- only for Material UI sites.


### Page object generation

* open Plugin (Open Chrome Developer Tools with F12 -> open the last tab on JDN Devtools);
* open the page for which you want to generate a page object and click "identify" button;
* the process of recognizing locators on the page and their generation will begin.

Attention! For the plugin to work, you need to check that the back-end is running.


### Tabs in a locator list:

* **Generated** - this tab displays all the locators that have already been generated by plugin;

* **Waiting for generating** - this tab displays locators that are currently being generated or are waiting in the generation queue. Here locators are displayed with full xpath, which will change to the new xpath at the end of generation.


### Ways to interact with locators:

* **on the cover of the locator on the web page:**
  * Left Button Mouse Click - selects an object; 
  * Right Button Mouse Click - opens a context menu;

* **in the locators list in the plugin:**
  * action with a specific locator - click on the menu button next to the desired locator;
  * actions with a group of locators - select the required locators using checkboxes and use the control buttons that appeared at the top of the table.


### Actions that can be performed with locators:

* **Edit** -  you can change the block type, variable name or xpath of the locator;
* **Settings** - you can influence the auto generated locator;
  * allow or don't allow indexes while generating xPath; 
  * limit generation time. For example, if the time is 10 seconds, this means that each locator will take a maximum of 10 seconds to generate. If the plugin fails to generate the optimal xPath in 10 seconds, it will provide the best xpath that it has managed to generate during this time. You can uncheck these settings, but generating locators may take longer.
* **Delete;**
* **Stop generation** - for locators, that are in section “Waiting for generation“;
* **Rerun** - if locator in section “Waiting for generation“ has been stopped;
* **Restore** - for section “Deleted locators“


### Prediction Accuracy
The Prediction Accuracy is displayed at the top next to each locator on the page.

The indicator of Prediction Accuracy shows the confidence of the plugin that it correctly recognized the element (e.g. link, button, table, etc.). For example, if you see that the button was recognized with a Prediction Accuracy of 50%, then it may be worth checking this element. If the Prediction Accuracy is 90%, then this recognition should be trusted more.

You can filter all locators by Prediction Accuracy using the slider in the plugin.Only objects that are above this slider are displayed in the locator list and highlighted on a web page. 


### Downloading Page Object

Locators that you want to place in your Page object, you need to highlight with checkboxes (or in blue on the page) and then click the download button that will appear at the top of the Locators list table. A Page Object in Java format will be downloaded to the computer. 



# **Branching**

```master``` - base branch
```issue_<YOUR_ISSUE_NUMBER>``` - feature or bugfix branch, started from master and merged into master when feature is ready
```release_<RELEASE_NUMBER>``` - release branch, start from master
```hotfix_<ISSUE_NUMBER>```  - fix for release, start from release branch and merged into it



# **How to update version**

For updating version in package.json and manifest.json you can run 
```
  npm run patch
```
or manualy change version in this files.

Commit and push changes.

When your request has been merged, github actions will create draft of release with current package.json version tag.

# **CI/CD**

Delivery pack is builded autimatically on commit in master.
